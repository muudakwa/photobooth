<!DOCTYPE html>
<html>
<head>
<title>Photobooth</title>
<style>
body {
    font-family: Arial;
    text-align: center;
    background: #111;
    color: white;
}

video {
    width: 300px;
    border-radius: 10px;
}

canvas {
    display: none;
}

button {
    padding: 10px;
    margin: 10px;
}
</style>
</head>
<body>

<h2>Photobooth Website</h2>

<video id="camera" autoplay></video>
<br>

<select id="jumlah">
    <option value="3">3 Foto</option>
    <option value="4">4 Foto</option>
    <option value="5">5 Foto</option>
</select>

<br>

<button onclick="startCapture()">Mulai Foto</button>

<br><br>

<div id="hasil"></div>

<canvas id="canvas"></canvas>

<script>
let video = document.getElementById("camera");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let photos = [];

navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    video.srcObject = stream;
});

function startCapture() {
    photos = [];
    let total = document.getElementById("jumlah").value;
    capturePhoto(0, total);
}

function capturePhoto(index, total) {
    canvas.width = 300;
    canvas.height = 300;
    ctx.drawImage(video, 0, 0, 300, 300);
    
    photos.push(canvas.toDataURL());

    if (index + 1 < total) {
        setTimeout(() => capturePhoto(index + 1, total), 1500);
    } else {
        createStrip();
    }
}

function createStrip() {
    let strip = document.createElement("canvas");
    strip.width = 300;
    strip.height = photos.length * 300;
    let sctx = strip.getContext("2d");

    photos.forEach((p, i) => {
        let img = new Image();
        img.src = p;
        img.onload = () => {
            sctx.drawImage(img, 0, i * 300, 300, 300);
        };
    });

    setTimeout(() => {
        let img = document.createElement("img");
        img.src = strip.toDataURL();
        document.getElementById("hasil").innerHTML = "";
        document.getElementById("hasil").appendChild(img);
    }, 1000);
}
</script>

</body>
</html>
